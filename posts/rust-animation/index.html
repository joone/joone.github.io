<!DOCTYPE html>
<html><head lang="en">
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge"><title>rust-animation project - Joone Blog</title><meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="I had used the GNOME Clutter project in the past while working on Accelerated Compositing in the WebKit clutter port. During that time, I extended the existing Clutter Actor APIs and implemented my own Actor to support CSS 3D transforms, which worked well. I even managed to run some impressive CSS 3D animation demos in the WebKit Clutter port.
However, the Clutter project has lost its direction and is now almost deprecated, even though it is still used in GNOME Shell." />
	<meta property="og:image" content=""/>
	<meta property="og:title" content="rust-animation project" />
<meta property="og:description" content="I had used the GNOME Clutter project in the past while working on Accelerated Compositing in the WebKit clutter port. During that time, I extended the existing Clutter Actor APIs and implemented my own Actor to support CSS 3D transforms, which worked well. I even managed to run some impressive CSS 3D animation demos in the WebKit Clutter port.
However, the Clutter project has lost its direction and is now almost deprecated, even though it is still used in GNOME Shell." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://joone.github.io/posts/rust-animation/" /><meta property="og:image" content="https://github.com/joone/rust-animation/blob/main/examples/easing_functions.gif?raw=true" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-12-05T17:20:49-08:00" />
<meta property="article:modified_time" content="2021-12-05T17:20:49-08:00" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://github.com/joone/rust-animation/blob/main/examples/easing_functions.gif?raw=true"/>

<meta name="twitter:title" content="rust-animation project"/>
<meta name="twitter:description" content="I had used the GNOME Clutter project in the past while working on Accelerated Compositing in the WebKit clutter port. During that time, I extended the existing Clutter Actor APIs and implemented my own Actor to support CSS 3D transforms, which worked well. I even managed to run some impressive CSS 3D animation demos in the WebKit Clutter port.
However, the Clutter project has lost its direction and is now almost deprecated, even though it is still used in GNOME Shell."/>
<script src="https://joone.github.io/js/feather.min.js"></script>
	
	
        <link href="https://joone.github.io/css/fonts.2c2227b81b1970a03e760aa2e6121cd01f87c88586803cbb282aa224720a765f.css" rel="stylesheet">
	

	
	<link rel="stylesheet" type="text/css" media="screen" href="https://joone.github.io/css/main.3e054fb5af83be9f620f8f8320cb21992526b8eb67b739f28ae60bb3f1522c10.css" />

	
	

	
	
	
	
</head>
<body>
        <div class="content"><header>
	<div class="main">
		<a href="https://joone.github.io/">Joone Blog</a>
	</div>
	<nav>
		
		<a href="/">Home</a>
		
		<a href="/posts">All posts</a>
		
		<a href="/about">About</a>
		
		<a href="/tags">Tags</a>
		
		
	</nav>
</header>

<main>
	<article>
		<div class="title">
			<h1 class="title">rust-animation project</h1>
			<div class="meta">Posted on Dec 5, 2021</div>
		</div>
		

		<section class="body">
			<p>I had used the GNOME Clutter project in the past while <a href="https://blogs.gnome.org/joone/2013/03/22/accelerated-compositing-with-clutter/">working on Accelerated Compositing in the WebKit clutter port</a>.
During that time, I extended the existing Clutter Actor APIs and implemented my own Actor to support CSS 3D transforms, which worked well. I even managed to run some impressive CSS 3D animation demos in the WebKit Clutter port.</p>
<p>However, the Clutter project has lost its direction and is now almost deprecated, even though it is still used in GNOME Shell.</p>
<p>Despite this, I had always envisioned maintaining a project similar to Clutter. As a result, I personally worked on a C++ implementation of a scene graph engine using OpenGL and even created a Rust implementation.</p>
<p>One day, while searching for similar projects on the Rust package site (crates.io), I discovered that someone had taken the name I wanted for my project, but the owner had not yet started the project. As a result, I decided to create <a href="https://crates.io/crates/rust-animation">a Rust crate</a> on crates.io and open <a href="https://github.com/joone/rust-animation">my code in github</a>.</p>
<p>It took some time to develop my Rust implementation to be more API-style, but the experience was much more interesting than I had anticipated, and I really enjoyed programming in Rust and publishing my project using the Cargo tool.</p>
<p>Once I had opened my code and created a crate on Rust crate site, I felt a greater sense of responsibility, even if nobody ended up using my project. Consequently, I continued to update my project and, in terms of code quality and functionality, the current code is much better than when it was first released. Here are the major features of rust-animation:</p>
<h2 id="animation-with-easing-functions">Animation with easing functions</h2>
<p><img src="https://github.com/joone/rust-animation/blob/main/examples/easing_functions.gif?raw=true" alt="alt easing_funcitions">
This library essentially enables the rendering of a rectangle with a specified color or texture image on the viewport. Furthermore, it also offers support for animations, utilizing a range of easing functions, including:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-rust" data-lang="rust"><span style="display:flex;"><span>      EasingFunction::EaseIn,
</span></span><span style="display:flex;"><span>      EasingFunction::EaseInCubic,
</span></span><span style="display:flex;"><span>      EasingFunction::EaseInOut,
</span></span><span style="display:flex;"><span>      EasingFunction::EaseInOutCubic,
</span></span><span style="display:flex;"><span>      EasingFunction::EaseInOutQuad,
</span></span><span style="display:flex;"><span>      EasingFunction::EaseInOutQuart,
</span></span><span style="display:flex;"><span>      EasingFunction::EaseInOutQuint,
</span></span><span style="display:flex;"><span>      EasingFunction::EaseInQuad,
</span></span><span style="display:flex;"><span>      EasingFunction::EaseInQuart,
</span></span><span style="display:flex;"><span>      EasingFunction::EaseInQuint,
</span></span><span style="display:flex;"><span>      EasingFunction::EaseOut,
</span></span><span style="display:flex;"><span>      EasingFunction::EaseOutCubic,
</span></span><span style="display:flex;"><span>      EasingFunction::EaseOutQuad,
</span></span><span style="display:flex;"><span>      EasingFunction::EaseOutQuart,
</span></span><span style="display:flex;"><span>      EasingFunction::EaseOutQuint,
</span></span><span style="display:flex;"><span>      EasingFunction::Linear,
</span></span><span style="display:flex;"><span>      EasingFunction::Step
</span></span></code></pre></div><h2 id="flex-ui">Flex UI</h2>
<p><img src="https://github.com/joone/rust-animation/blob/main/examples/flex_ui.png?raw=true" alt="alt flex_ui">
The support for Flex UI is fantastic, as someone has already implemented it for Rust projects. I simply added this crate to my project, and it works perfectly. In fact, I was able to implement the above demo in just 30 minutes. o/</p>
<h2 id="event-handling">Event handling</h2>
<p>rust-animation offers support for the EventHandler trait to enable event handling in rust-animation applications. Essentially, it works like callback functions, allowing users to receive event signals from rust-animation.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-rust" data-lang="rust"><span style="display:flex;"><span><span style="color:#66d9ef">pub</span> <span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">ActorEvent</span> {
</span></span><span style="display:flex;"><span>  name: String,
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">impl</span> ActorEvent {
</span></span><span style="display:flex;"><span> <span style="color:#66d9ef">pub</span> <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">new</span>() -&gt; <span style="color:#a6e22e">Self</span> {
</span></span><span style="display:flex;"><span>    ActorEvent {
</span></span><span style="display:flex;"><span>      name: <span style="color:#e6db74">&#34;actor_event&#34;</span>.to_string()
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span> }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">impl</span> EventHandler <span style="color:#66d9ef">for</span> ActorEvent {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">key_focus_in</span>(<span style="color:#f92672">&amp;</span><span style="color:#66d9ef">mut</span> self, actor: <span style="color:#66d9ef">&amp;</span><span style="color:#a6e22e">mut</span> Actor) {
</span></span><span style="display:flex;"><span>     println!(<span style="color:#e6db74">&#34;key_focus_in: {} {}&#34;</span>, self.name, actor.name);
</span></span><span style="display:flex;"><span>     actor.apply_scale_animation(<span style="color:#ae81ff">1.0</span>, <span style="color:#ae81ff">1.1</span>, <span style="color:#ae81ff">0.3</span>, EasingFunction::EaseInOut);
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">key_focus_out</span>(<span style="color:#f92672">&amp;</span><span style="color:#66d9ef">mut</span> self, actor: <span style="color:#66d9ef">&amp;</span><span style="color:#a6e22e">mut</span> Actor) {
</span></span><span style="display:flex;"><span>    println!(<span style="color:#e6db74">&#34;key_focus_out: {} {}&#34;</span>, self.name, actor.name);
</span></span><span style="display:flex;"><span>    actor.scale_x <span style="color:#f92672">=</span> <span style="color:#ae81ff">1.0</span>;
</span></span><span style="display:flex;"><span>    actor.scale_y <span style="color:#f92672">=</span> <span style="color:#ae81ff">1.0</span>;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">key_down</span>(<span style="color:#f92672">&amp;</span><span style="color:#66d9ef">mut</span> self, key: <span style="color:#66d9ef">usize</span>, actor: <span style="color:#66d9ef">&amp;</span><span style="color:#a6e22e">mut</span> Actor) {
</span></span><span style="display:flex;"><span>     println!(<span style="color:#e6db74">&#34;key_down: {}  {}  {}&#34;</span>, self.name, key, actor.name);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> key <span style="color:#f92672">==</span> <span style="color:#ae81ff">262</span> {  <span style="color:#75715e">// right cursor
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>       actor.select_next_sub_actor();
</span></span><span style="display:flex;"><span>    } <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> key <span style="color:#f92672">==</span> <span style="color:#ae81ff">263</span> { <span style="color:#75715e">// left cursor 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>       actor.select_prev_sub_actor();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>I am currently working on adding additional event handler methods.</p>
<h2 id="user-defined-layout">User-defined layout</h2>
<p>In addition to Flex UI, rust-animation offers the ActorLayout trait as a means of implementing custom layouts.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-rust" data-lang="rust"><span style="display:flex;"><span><span style="color:#66d9ef">pub</span> <span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">ActorLayout</span> {
</span></span><span style="display:flex;"><span>  name: String,
</span></span><span style="display:flex;"><span>  cur_x: <span style="color:#66d9ef">i32</span>,
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">impl</span> ActorLayout {
</span></span><span style="display:flex;"><span> <span style="color:#66d9ef">pub</span> <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">new</span>() -&gt; <span style="color:#a6e22e">Self</span> {
</span></span><span style="display:flex;"><span>    ActorLayout {
</span></span><span style="display:flex;"><span>      name: <span style="color:#e6db74">&#34;actor_layout&#34;</span>.to_string(),
</span></span><span style="display:flex;"><span>      cur_x: <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span> }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>When rust-animation requires an update to the layout, it calls layout_sub_actor, which then enables the user to update the locations of the child elements as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-rust" data-lang="rust"><span style="display:flex;"><span><span style="color:#66d9ef">impl</span> Layout <span style="color:#66d9ef">for</span> ActorLayout {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">layout_sub_actors</span>(<span style="color:#f92672">&amp;</span><span style="color:#66d9ef">mut</span> self, sub_actor_list: <span style="color:#66d9ef">&amp;</span><span style="color:#a6e22e">mut</span> Vec<span style="color:#f92672">&lt;</span>Actor<span style="color:#f92672">&gt;</span>) {
</span></span><span style="display:flex;"><span>    println!(<span style="color:#e6db74">&#34;layout_sub_layer {}&#34;</span>, self.name);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> <span style="color:#66d9ef">mut</span> index : <span style="color:#66d9ef">i32</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> sub_actor <span style="color:#66d9ef">in</span> sub_actor_list.iter_mut() {
</span></span><span style="display:flex;"><span>      self.cur_x <span style="color:#f92672">+=</span> sub_actor.width <span style="color:#66d9ef">as</span> <span style="color:#66d9ef">i32</span>;
</span></span><span style="display:flex;"><span>      sub_actor.x <span style="color:#f92672">=</span> index <span style="color:#f92672">%</span> <span style="color:#ae81ff">5</span> <span style="color:#f92672">*</span> IMAGE_WIDTH <span style="color:#66d9ef">as</span> <span style="color:#66d9ef">i32</span>;
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">let</span> col <span style="color:#f92672">=</span> index  <span style="color:#f92672">/</span> <span style="color:#ae81ff">5</span>;
</span></span><span style="display:flex;"><span>      sub_actor.y <span style="color:#f92672">=</span>  col <span style="color:#f92672">*</span> IMAGE_HEIGHT <span style="color:#66d9ef">as</span> <span style="color:#66d9ef">i32</span>;
</span></span><span style="display:flex;"><span>      index <span style="color:#f92672">+=</span><span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Currently, the most pressing missing feature is support for text rendering. Although there are various crates available to support text rendering, I would like to opt for a native Rust implementation, such as <a href="https://crates.io/crates/rusttype">rusttype</a>.</p>
<p>Happy Hacking!</p>

		</section>

		<div class="post-tags">
			
			
			<nav class="nav tags">
				<ul class="tags">
					
					<li><a href="/tags/rust">Rust</a></li>
					
					<li><a href="/tags/myproject">MyProject</a></li>
					
				</ul>
			</nav>
			
			
		</div>
    
    <div class="pt-4"></div>
    <div class="mt-5 border-default border p-4 bg-white rounded">
      <script src="https://utteranc.es/client.js"
      repo="joone/joone.github.io"
      issue-term="pathname"
      theme="github-light"
      crossorigin="anonymous"
      async>
      </script>
    </div>

	</article>
</main>
<footer>
  <div style="display:flex"><a class="soc" href="https://github.com/joone" rel="me" title="GitHub"><i data-feather="github"></i></a>
    <a class="border"></a><a class="soc" href="https://twitter.com/joone/" rel="me" title="Twitter"><i data-feather="twitter"></i></a>
    <a class="border"></a></div>
  <div class="footer-info">
    2025  © Joone Hur |  <a
      href="https://github.com/athul/archie">Archie Theme</a> | Built with <a href="https://gohugo.io">Hugo</a>
  </div>
</footer>


<script>
  feather.replace()
</script></div>
    </body>
</html>
